<!-- <p>-----------------------------------------------------------------------------------------------------------------------------</p> -->
<!-- <p>main suggestion for that day</p> -->
<div class="dark-mode" style="background-color: rgb(0,0,0);color: white;" [ngStyle]="{'height': (loading2) ? 'auto' : 'auto'}">
<div *ngIf="loading" style="position: absolute;top: 60px;left: 0;width: 100%;height: 100%;z-index: 2;background-color: rgb(0,0,0);">
  <!-- <div style="display: flex;justify-content: center;">
    <h1>Only the first load takes time...</h1>
  </div> -->
  <div style="display: flex;justify-content: center;align-items: center;flex-wrap: wrap;height: 90%;">
    <img src="../../../assets/loading animation/load2-crop.gif" width="200" height="200" style="opacity: 1;">
    <!-- <div style="width: 100%;height: 0%;"></div> -->
  </div>

</div>

<div *ngIf="loading" style="position: absolute;bottom: 150px;z-index:10;width: 90%;margin: 5%;border-radius: 20px;">
  <div style="display: flex;justify-content: center;">
      <p>Only the first time loading takes time.</p>
  </div>
</div>

<!-- <div *ngIf="tipVisible" style="position: absolute;top: 70px;z-index:10;width: 90%;background-color: rgb(68,68,68);color: white;margin: 5%;border-radius: 20px;">
  <div class="d-flex bd-highlight" style="align-items: center;">
      <div class="p-2 w-100 bd-highlight" style="margin-left: 5%;"><p style="font-size: small;" [innerHTML]="tip"></p></div>
      <div class="p-2 flex-shrink-1 bd-highlight" style="margin-right: 5%;" (click)="tipVisible = false">
          <i style="color: white;" class="bi bi-x-circle-fill"></i>
      </div>
    </div>
</div> -->



<div *ngIf="loading2" style="position: fixed;bottom: 70px;z-index:10;width: 90%;background-color: rgba(255, 255, 255, 0.863);color: black;margin: 5%;border-radius: 20px;">
  <div class="d-flex bd-highlight" style="align-items: center;">
      <div class="p-2 w-100 bd-highlight" style="margin-left: 5%;align-items: center;"><h6>Loading data please wait.</h6></div>
      <div class="p-2 flex-shrink-1 bd-highlight" style="margin-right: 5%;" (click)="loading2 = false">
          <i style="color: blck;" class="bi bi-x-circle-fill"></i>
      </div>
    </div>
</div>

<!--this below div is used to display today movie until real data loads-->
<div *ngIf="loading2" id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <span *ngIf="todayBooleanMovie">
        <a (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal">
        <img class="d-block w-100" src="{{this.todayMovieD.bigImageUrl}}" alt="{{this.todayMovieD.title}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
        <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
          <span class="badge badge-primary">
            Today Suggestion
          </span>
        </span>
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <h5>{{this.todayMovieD.title}} <span style="font-size: small;">({{this.todayMovieD.releaseYear}})</span></h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">Today Suggestion</span>
        </div> -->

        <div *ngIf="isMobile" style="font-size: small;">
          <div style="display: flex;justify-content: center;">
            <p>{{this.todayMovieD.language | commapipe}} . {{this.todayMovieD.runTime}} Minutes</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}}</p>
          </div>
          <!-- <div style="display: flex;justify-content: center;">
            <p>Released Year : {{this.todayMovieD.releaseYear}}</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>Run Time : {{this.todayMovieD.runTime}} Minutes</p>
          </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.todayMovieD.language | commapipe}}</p>
            <p><b>Genre : </b>{{this.todayMovieD.genre | commapipe}}</p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
            <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p>
          </div>
        </div>
      </span>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators2" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators2" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div *ngIf="!loggedIn && !loading2">
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <!--today movie-->
      <div class="carousel-item active">      
        <span *ngIf="todayBooleanMovie && !loading">
          <img class="d-block w-100" src="../../../assets/images/nomovietoday2.PNG" alt="No Movie Today">
        </span>
        <span *ngIf="!todayBooleanMovie && !loading">
          <a (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal">
          <img class="d-block w-100" src="{{this.todayMovie.imageUrl}}" alt="{{this.todayMovie.title}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
          <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
            <span class="badge badge-primary">
              Today Suggestion
            </span>
          </span>
          </a>
          <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
            <h5>{{this.todayMovie.title}} <span style="font-size: small;">({{this.todayMovieD.releaseYear}})</span></h5><br>          
          </div>
          <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
            <span class="badge badge-primary">Today Suggestion</span>            
          </div> -->

          <div *ngIf="isMobile" style="font-size: small;">
            <div style="display: flex;justify-content: center;">
              <p>{{this.todayMovieD.language | commapipe}} . {{this.todayMovieD.runTime}} Minutes</p>
            </div>
            <div style="display: flex;justify-content: center;">
              <p>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}}</p>
            </div>
            <!-- <div style="display: flex;justify-content: center;">
              <p>Released Year : {{this.todayMovieD.releaseYear}}</p>
            </div>
            <div style="display: flex;justify-content: center;">
              <p>Run Time : {{this.todayMovieD.runTime}} Minutes</p>
            </div> -->
          </div>
          
          <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
            <div class="col-sm-6">
              <p><b>Language : </b>{{this.todayMovieD.language | commapipe}}</p>
              <p><b>Genre : </b>{{this.todayMovieD.genre | commapipe}}</p>
            </div>
            <div class="col-sm-6">
              <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
              <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p>
            </div>
          </div>
        </span>
      </div>
      <div class="carousel-item" *ngIf="topCustomer">      
        <span *ngIf="todayBooleanMovie && !loading">
          <img class="d-block w-100" src="../../../assets/images/nomovietoday2.PNG" alt="No Movie Today">
        </span>
        <span *ngIf="!todayBooleanMovie && !loading">
          <a (click)="this.router.navigateByUrl('/board')">
          <img class="d-block w-100" src="{{topCustomer.customerPhotoUrl}}" alt="{{topCustomer.name}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
          <div style="background-color: rgba(70, 70, 70, 0.493);height: 200px;width: 100%;position: absolute;top: 0;">
            <div style="margin: 5%;display: flex;justify-content: center;align-items: center;height: 200px;">
              <img style="width: 80px;height: 80px;border-radius: 100px;border: 2px solid white;margin-right: 10px;" src="{{topCustomer.customerPhotoUrl}}" alt="{{topCustomer.name}}">
              <h3><b>{{topCustomer.name | titlecase}}</b></h3>
            </div>
          </div>
          <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
            <span class="badge badge-primary">
              Top In MovieBuff Board
            </span>
          </span>
          </a>
          <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
            <h5>{{topCustomer.name | titlecase}}</h5><br>          
          </div>
          
          <div *ngIf="isMobile" style="font-size: small;">
            <div style="display: flex;justify-content: center;">
              <p>Binge King</p>
            </div>
            <div style="display: flex;justify-content: center;">
              <p>MovieBuff Score : {{topCustomer.wishlistedMovies.length + topCustomer.ratedMovies.length + topCustomer.watchedMovies.length}}</p>
            </div>
            <!-- <div style="display: flex;justify-content: center;">
              <p>Followers : {{topCustomer.followers.length}}</p>
            </div>
            <div style="display: flex;justify-content: center;">
              <p>Following : {{topCustomer.following.length}}</p>
            </div> -->
          </div>
          
          <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
            <div class="col-sm-6">
              <p><b>Language : </b>{{this.todayMovieD.language | commapipe}}</p>
              <p><b>Genre : </b>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}} </p>
            </div>
            <div class="col-sm-6">
              <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
            </div>
          </div>
        </span>
      </div>
  
      
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <!-- <hr *ngIf="!loading"> -->
  </div>
</div>

<div *ngIf="loggedIn && !loading2" id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <!--today movie-->
    <div class="carousel-item active">      
      <!-- <span *ngIf="todayBooleanMovie && !loading">
        <img class="d-block w-100" src="../../../assets/images/nomovietoday.PNG" alt="No Movie Today">
      </span> -->
      <span *ngIf="todayBooleanMovie && !loading">
        <a >
        <img class="d-block w-100" src="../../../assets/images/nomovietoday2.PNG" alt="No Movie Today"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <h5>Suggesto</h5><br>          
        </div>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">No Movie Suggestion today </span>
          <!-- <h6 class="text-muted text-centre" style="margin: 2%;font-size: small;align-items: center;">"{{this.todayMovie.description}}"</h6>          -->
        </div>

        <div *ngIf="isMobile"  style="font-size: small;margin-top: 10px;">
          <div style="display: flex;justify-content: center;">
            <p>None</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>None</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>None</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>None</p>
          </div>
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>None</p>
            <p><b>Genre : </b>None</p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>None</p>
          </div>
        </div>
      </span>
      <span *ngIf="!todayBooleanMovie && !loading">
        <a (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal">
        <img class="d-block w-100" src="{{this.todayMovie.imageUrl}}" alt="{{this.todayMovie.title}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
        <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
          <span class="badge badge-primary">
            Today Suggestion
          </span>
        </span>
        </a>
        <!-- <span style="position: absolute;bottom: 0;left: 0;width: 100%;background-color: blue;height: 20px;"></span> -->
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;height: auto;">
          <h5>{{this.todayMovie.title}} <span style="font-size: small;">({{this.todayMovieD.releaseYear}})</span></h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;height: auto;">
          <span class="badge badge-primary">Today Suggestion</span>
        </div> -->

        <div *ngIf="isMobile"  style="font-size: small;">
          <div style="display: flex;justify-content: center;">
            <p style="margin-bottom: none;">{{this.todayMovieD.language | commapipe}} . {{this.todayMovieD.runTime}} Minutes</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}}</p>
          </div>
          <!-- <div style="display: flex;justify-content: center;">
            <p>Released Year : {{this.todayMovieD.releaseYear}}</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>Run Time : {{this.todayMovieD.runTime}} Minutes</p>
          </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.todayMovieD.language}}</p>
            <p><b>Genre : </b>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}}</p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
            <!-- <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p> -->
          </div>
        </div>
      </span>
    </div>
    <!--wishlisted movie-->
    <div class="carousel-item" *ngIf="loggedIn && corouselWishlistedMovieBool">
      <span *ngIf="!loading">
        <a (click)="startQuickView(this.corouselWishlistedMovie.key)" data-toggle="modal" data-target="#quickviewmodal">
          <img class="d-block w-100" src="{{this.corouselWishlistedMovie.imageUrl}}" alt="{{this.corouselWishlistedMovie.title}}" [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
          <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
            <span class="badge badge-primary">
              From Wishlist
            </span>
          </span>
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;height: auto;">
          <h5>{{this.corouselWishlistedMovie.title}} <span style="font-size: small;">({{this.corouselWishlistedMovieD.releaseYear}})</span></h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">From Wishlist</span>
        </div> -->

        <div *ngIf="isMobile"  style="font-size: small;">
          <div style="display: flex;justify-content: center;">
            <p style="margin-bottom: none;">{{this.corouselWishlistedMovieD.language | commapipe}} . {{this.corouselWishlistedMovieD.runTime}} Minutes</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>{{ (corouselWishlistedMovieD.genre.length>45)? (corouselWishlistedMovieD.genre | slice:0:40)+'...':(corouselWishlistedMovieD.genre)}}</p>
          </div>
          <!-- <div style="display: flex;justify-content: center;">
            <p>Released Year : {{this.corouselWishlistedMovieD.releaseYear}}</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>Run Time : {{this.corouselWishlistedMovieD.runTime}} Minutes</p>
          </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.corouselWishlistedMovieD.language | commapipe}}</p>
            <p><b>Genre : </b>{{ (corouselWishlistedMovieD.genre.length>45)? (corouselWishlistedMovieD.genre | slice:0:40)+'...':(corouselWishlistedMovieD.genre)}}</p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.corouselWishlistedMovieD.releaseYear}}</p>
            <!-- <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.corouselWishlistedMovie.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p> -->
          </div>
        </div>
      </span>      
    </div>
    <!--today movie-->
    <div class="carousel-item" *ngIf="!todayBooleanMovie">      
      <span *ngIf="todayBooleanMovie && !loading">
        <img class="d-block w-100" src="../../../assets/images/nomovietoday2.PNG" alt="No Movie Today">
      </span>
      <span *ngIf="!todayBooleanMovie && !loading">
        <a (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal">
        <img class="d-block w-100" src="{{this.todayMovie.imageUrl}}" alt="{{this.todayMovie.title}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
        <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
          <span class="badge badge-primary">
            Today Suggestion
          </span>
        </span>
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <h5>{{this.todayMovie.title}} <span style="font-size: small;">({{this.todayMovieD.releaseYear}})</span></h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">Today Suggestion</span>
        </div> -->
        
        <div *ngIf="isMobile"  style="font-size: small;">
          <div style="display: flex;justify-content: center;">
            <p style="margin-bottom: none;">{{this.todayMovieD.language | commapipe}} . {{this.todayMovieD.runTime}} Minutes</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}}</p>
          </div>
          <!-- <div style="display: flex;justify-content: center;">
            <p>Released Year : {{this.todayMovieD.releaseYear}}</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>Run Time : {{this.todayMovieD.runTime}} Minutes</p>
          </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.todayMovieD.language | commapipe}}</p>
            <p><b>Genre : </b>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}} </p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
            <!-- <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.todayMovieD.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p> -->
          </div>
        </div>
      </span>
    </div>
    <!--personalised movie-->
    <div class="carousel-item" *ngIf="loggedIn && corouselPersonalisedMovieBool">
      <span *ngIf="!loading">
        <a (click)="startQuickView(this.corouselPersonalisedMovieD.key)" data-toggle="modal" data-target="#quickviewmodal">
          <img class="d-block w-100" src="{{this.corouselPersonalisedMovieD.bigImageUrl}}" alt="{{this.corouselPersonalisedMovieD.title}}" [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
          <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
            <span class="badge badge-primary">
              From Personalised Movies
            </span>
          </span>
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <h5>{{this.corouselPersonalisedMovieD.title}} <span style="font-size: small;">({{this.corouselPersonalisedMovieD.releaseYear}})</span></h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">From Personalised Movies</span>
          <h6 class="text-muted text-centre" style="margin: 2%;font-size: small;align-items: center;">"{{this.corouselWishlistedMovie.description}}"</h6>         
        </div> -->
        <div *ngIf="isMobile" style="font-size: small;">
        <div style="display: flex;justify-content: center;">
          <p>{{this.corouselPersonalisedMovieD.language | commapipe}} . {{this.corouselPersonalisedMovieD.releaseYear}}</p>
        </div>
        <div style="display: flex;justify-content: center;">
          <p>{{ (corouselPersonalisedMovieD.genre.length>45)? (corouselPersonalisedMovieD.genre | slice:0:40)+'...':(corouselPersonalisedMovieD.genre)}}</p>
        </div>
        <!-- <div style="display: flex;justify-content: center;">
          <p>Released Year : {{this.corouselPersonalisedMovieD.releaseYear}}</p>
        </div>
        <div style="display: flex;justify-content: center;">
          <p>Run Time : {{this.corouselPersonalisedMovieD.runTime}} Minutes</p>
        </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.corouselPersonalisedMovieD.language | commapipe}}</p>
            <p><b>Genre : </b>{{ (corouselPersonalisedMovieD.genre.length>45)? (corouselPersonalisedMovieD.genre | slice:0:40)+'...':(corouselPersonalisedMovieD.genre)}}</p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.corouselPersonalisedMovieD.releaseYear}}</p>
            <!-- <p><b>Quick view : </b><button type="button" class="btn btn-outline-primary btn-sm" (click)="startQuickView(this.corouselPersonalisedMovieD.key)" data-toggle="modal" data-target="#quickviewmodal" >Watch here</button></p> -->
          </div>
        </div>
      </span>      
    </div>
    <!--top in leaderboard-->
    <div class="carousel-item" *ngIf="topCustomer">      
      <span *ngIf="todayBooleanMovie && !loading">
        <img class="d-block w-100" src="../../../assets/images/nomovietoday2.PNG" alt="No Movie Today">
      </span>
      <span *ngIf="!todayBooleanMovie && !loading">
        <a (click)="this.router.navigateByUrl('/board')">
        <img class="d-block w-100" src="{{topCustomer.customerPhotoUrl}}" alt="{{topCustomer.name}}"  [ngStyle]="{'height': (isMobile) ? '200px' : 'auto'}">
        <div style="background-color: rgba(70, 70, 70, 0.493);height: 200px;width: 100%;position: absolute;top: 0;">
          <div style="margin: 5%;display: flex;justify-content: center;align-items: center;height: 200px;">
            <img style="width: 80px;height: 80px;border-radius: 100px;border: 2px solid white;margin-right: 10px;" src="{{topCustomer.customerPhotoUrl}}" alt="{{topCustomer.name}}">
            <h3><b>{{topCustomer.name | titlecase}}</b></h3>
          </div>
        </div>
        <span style="position: absolute;top: 10px;left: 10px;width: 100%; ">
          <span class="badge badge-primary">
            Top In MovieBuff Board
          </span>
        </span>
        </a>
        <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <h5>{{topCustomer.name | titlecase}}</h5><br>          
        </div>
        <!-- <div style="display: flex;justify-content: center;flex-wrap: nowrap;">
          <span class="badge badge-primary">Top In MovieBuff Board</span>
        </div> -->
        
        <div *ngIf="isMobile" style="font-size: small;">
          <div style="display: flex;justify-content: center;">
            <p>Binge King</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>MovieBuff Score : {{topCustomer.wishlistedMovies.length + topCustomer.ratedMovies.length + topCustomer.watchedMovies.length}}</p>
          </div>
          <!-- <div style="display: flex;justify-content: center;">
            <p>Followers : {{topCustomer.followers.length}}</p>
          </div>
          <div style="display: flex;justify-content: center;">
            <p>Following : {{topCustomer.following.length}}</p>
          </div> -->
        </div>
        
        <div *ngIf="!isMobile" class="row" style="margin-left: 3%;margin-right: 3%;margin-top: 0;font-size: small;">
          <div class="col-sm-6">
            <p><b>Language : </b>{{this.todayMovieD.language | commapipe}}</p>
            <p><b>Genre : </b>{{ (todayMovieD.genre.length>45)? (todayMovieD.genre | slice:0:40)+'...':(todayMovieD.genre)}} </p>
          </div>
          <div class="col-sm-6">
            <p><b>Released Year : </b>{{this.todayMovieD.releaseYear}}</p>
          </div>
        </div>
      </span>
    </div>

    
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  <!-- <hr *ngIf="!loading"> -->
</div>
<!-- <hr *ngIf="!loading"> -->
<br>

<!-- MODAL STARTS HERE --> 

<!--notification modal-->
<div class="modal fade" id="exampleModalCenterNotify" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Notification</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        We notify you of our new movie suggestion on friday, Saturday and Sunday. We don't spam you with other notifications. Please allow notifications..
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="pushSubscription()" data-toggle="modal" data-target="#exampleModalCenterNotify">Allow</button>
      </div>
    </div>
  </div>
</div>
<!--notification modal ends here-->

<!--modal for ratinge-->

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content" style="background-color: rgb(22,22,22);color: white;border: 1px solid white;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">{{MovieToBeRated.title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- <div class="embed-responsive embed-responsive-16by9">
          <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/T6DJcgm3wNY?rel=0" allowfullscreen></iframe>
        </div> -->
        <div class="rating" style="margin: 5%;">
          <div class="form-group">            
            <!-- <img src="{{MovieToBeRated.imageUrl}}" style="max-width: 100%;max-height: 100%;display: block;"> -->
            <div id="trailer-mobile" class="embed-responsive embed-responsive-16by9" style="border-radius: 10px;">
              <iframe class="embed-responsive-item" [src]="safeSrc" allowfullscreen></iframe>
            </div>
            <label for="exampleInputPassword2">Already saw this movie, please give us your rating to this movie</label>     
            <small id="emailHelp" class="form-text text-muted">It will help us to suggest better movies based on the rating you give. You can only rate one time per movie. (editing rating for movies will be supported in next version) </small> <br>
            <div style="display: flex;">
            <select class="form-select browser-default custom-select" id="ratingdropdown" aria-label="Default select example" name="rtingd" [(ngModel)]="rating">
              <option [value]=0>Rate {{MovieToBeRated.title}} movie here</option>
              <option [value]="1">Below Average</option>
              <option [value]="2">Average</option>
              <option [value]="3">Good</option>
              <option [value]="4">Extra-ordinary</option>
              <option [value]="5">Mind blowing</option>
            </select>   
            <button type="button" style="margin-left: 1%;width: 100px;" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-target="#exampleModalCenter" (click)=rateMovie(MovieToBeRated.key)>Submit</button>   </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- MODAL ENDS HERE -->

<!--quick view modal-->
<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
<div class="modal fade" id="quickviewmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" >
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content" style="background-color: rgb(22,22,22);color: white;border: 1px solid white;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">{{quickViewMovie.title}} ({{quickViewMovie.releaseYear}})</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeQuickView()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="trailer-mobile" class="embed-responsive embed-responsive-16by9" style="border-radius: 10px;">
          <iframe class="embed-responsive-item" [src]="quickViewSafeSrc" allowfullscreen></iframe>
        </div>
        <br>
        <span *ngIf="quickViewMovie.runTime">
          <p class="text-center">Run Time : {{quickViewMovie.runTime}} minutes</p>
        </span>
        <p class="text-center">{{quickViewMovie.title}} Available In : </p>
        <!-- <h6 class="mb-3"><label class="top-label">Available In : </label></h6> -->
        <div style="display: flex;justify-content: center;flex-wrap: wrap;">
          <a (click)="GoToMovieExternalSiteQuickView()">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Netflix" src="../../../assets/ott-icons/netflix.jpg" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Prime_Video" src="../../../assets/ott-icons/prime.png" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Aha" src="../../../assets/ott-icons/aha.jpeg" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.JioCinema" src="../../../assets/ott-icons/jiocinema.png" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Zee5" src="../../../assets/ott-icons/zee5.png" width="50" height="50">
          <img style=" margin: 5px;border-radius: 10px;" *ngIf="quickViewMovie.availableIn.Youtube" src="../../../assets/ott-icons/youtube.jpg" width="50" height="50"></a>
        </div><br>
        <a class="btn btn-outline-primary  buttons-top btn-block" style="width: 95%;" role="button" (click)="GoToMovieExternalSiteQuickView()"> Watch Movie <i class="fa fa-play-circle-o"></i></a>
        <a class="btn btn-outline-primary  buttons-top btn-block" style="width: 95%;" role="button" (click)="GoToMovieHref(quickViewMovie.key)"> Detail view about Movie <i class="fa fa-info-circle"></i></a>
      </div>
    </div>
  </div>
</div>
<!--quick view modal ends-->

<!--check for loading-->
<div *ngIf="!loading"  style="margin-bottom: 50px ;">
<!--very important for responsiveness between mobile and laptop-->
<!--------------------------------------------------------MOBILE BELOW -------------------------------------------------------------->
<span *ngIf="isMobile">
    <!-- <div style="margin: 3%;border: 1px solid white;border-radius: 20px;">
      <h5 style="margin: 2%;align-items: center;">Tip: </h5>
      <h6 style="margin: 2%;align-items: center;" [innerHTML]="tip"></h6>
      <button class="btn btn-outline-light btn-sm" (click)="randomTip()" style="margin-left: 80%;margin-bottom: 2%;">Next</button>
    </div> -->

    <!--recently-->
    <div>
      <h5 class="text-center display-8">Recently Suggested Movies From Us <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 0l-6 22-8.129-7.239 7.802-8.234-10.458 7.227-7.215-1.754 24-12zm-15 16.668v7.332l3.258-4.431-3.258-2.901z"/></svg></h5>
      <div class="scrolling-wrapper2">
        <span *ngFor="let movie of sortedArray">
          <div *ngIf="!watchedMovies.includes(movie.key)" class="item" [ngStyle]="{'height': (loggedIn) ? '320px' : '320px'}" >
          <!-- <div class="item" *ngIf=(!loggedIn) style="height: 250px;"> -->
            <a (click)="GoToMovie(movie.key)">
              <img src="{{movie.smallImageUrl}}" class="img-thumbnail" style="height: 210px;width: 150px;">
              <a style="position:absolute;bottom: 120px;right: 10px;z-index: 10;" (click)="GoToMovieExternalSite(movie.key)">
                <img *ngIf="movie.ott.Netflix" src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Prime_Video" src="../../../assets/ott-icons/prime.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Aha" src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.JioCinema" src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Zee5" src="../../../assets/ott-icons/zee5.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Youtube" src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 5px;height: 32px;">
              </a>
            </a>
            <h6 style="text-align: center;">{{movie.title}}</h6> 
            <!-- <button (click)="startSharedWindow(movie)" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button> -->
            <div style="display: flex;justify-content: center;">
             <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button>
             <span style="margin: 2%">
              <!-- <button type="button" class="btn btn-sm btn-block btn-outline-dark"> -->
                <a (click)="startSharedWindow(movie)">
                  <img style="width: 32px;margin-right: 5%;" src="../../../assets/images/send.png">
                </a>
             </span>
            </div>

            <div style="display: flex;justify-content: center;">
              <span class="neumorphic-ui" *ngIf="!wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="addMovieToWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                    <i class="bi bi-heart"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;"  (click)="removeFromWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                  <i class="bi bi-heart-fill" style="color: red;"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="!ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                <button style="border: none;"  data-toggle="modal" data-target="#exampleModalCenter" (click)="startRateMovie(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-star"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="ratedMoviesForThisCustomer.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;"  type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-star-fill" style="color: gold;"></i>
                </button>
              </span>

              <span class="neumorphic-ui" *ngIf="!watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;"  (click)="addToWatchedMovies(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <span style="font-size: xx-small;"> Watched?</span>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;"  (click)="removeFromWatched(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-check-circle-fill"></i>
                </button>
              </span>

            </div> 
          </div>     
        </span>    
      </div>
    </div>
    <!--recently end here-->

    <br>

    <!--find Now -->
    <div style="margin-top: 3%;margin-bottom: 3%;">
      <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
        <div class="p-2"><h5 class="text-center display-8">Find Movies</h5></div>
        <div class="ml-auto p-2">
          <div class="float-right" style="margin-right:3% ;">
            <span class="badge badge-light">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
              </svg>
            </span>
          </div>
        </div>
      </div>
      <div class="scrolling-wrapper3">
        <div class="content-item">
          <div class="lists" style="margin: 2%;display: flex;">
              <div class="scrolling-wrapper3">
                  <div class="list-item item3" *ngFor="let g of allPlatforms" (click)="GoToPlatform(g)">
                      <div class="long-word" *ngIf="g == 'Netflix'">
                        <img src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Prime_Video'">
                        <img src="../../../assets/ott-icons/prime.jpeg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Hotstar'">
                        <img src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Aha'">
                        <img src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Youtube'">
                        <img src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Sun_Next'">
                        <img src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Zee5'">
                        <img src="../../../assets/ott-icons/zee5.png" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'Sony_Liv'">
                        <img src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                      <div class="long-word" *ngIf="g == 'JioCinema'">
                        <img src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 10px;width: 50px;height: 50px;"> 
                      </div>
                  </div>
              </div>
          </div>
      </div>
      </div>
      <div class="scrolling-wrapper3">
        <div class="content-item">
          <div class="lists" style="margin: 2%;display: flex;">
              <div class="scrolling-wrapper3">
                  <div class="list-item item3" *ngFor="let g of allGenres" (click)="GoToGenre(g)">
                      <div class="long-word">{{g}}</div>
                  </div>
              </div>
          </div>
      </div>
      </div>
    </div>
    <!--find now OTT end here-->

    <br>

    <!--recomended movies based on watched movie-->
    <div *ngIf="recommendationsBool" class="d-flex" style="margin-left: 5%;margin-right: 5%;">
      <div class="p-2"><h5 class="display-8">Because You have watched <b>{{spotLightMovie.title | titlecase}}</b></h5>
        <small id="emailHelp" class="form-text text-muted" *ngIf="recommendedMovieTitles.length === 0">No Recommendation for {{spotLightMovie.title | titlecase}}. Please mark more movies as watched to see recommendations.</small>
      </div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div  class="scrolling-wrapper3">
      <span *ngFor="let m of recommendedMovieTitles">
        <div class="item-Trending" style="margin: 2%;margin-right: 0;width: 150px;">
          <div style="display: flex;justify-content: center;">
            <img (click)="goToRecommendedMovieImdb(m.id,m.title)" src="{{m.imageUrl}}" width="150" height="200" style="margin: 5px;border-radius: 10px;">
          </div>
          <div style="display: flex;justify-content: center;overflow-x: hidden;">
            {{m.title}}
          </div>
        </div>
      </span>
    </div>            
        
    <!--recomended movies based on watched movie end here-->

    <br *ngIf="recommendationsBool">

    <!--personalised movies-->
    <div  class="d-flex" style="margin-left: 5%;margin-right: 5%;" *ngIf="loggedIn && (personalisedMoviesDisplay.length !== 0)">
      <div class="p-2"><h5 class="display-8" routerLink="/personalisedForYou">Personalised Movies <span class="badge badge-dark"> beta</span></h5>
      </div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span routerLink="/personalisedForYou" class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div *ngIf="loggedIn" class="scrolling-wrapper3">
      <div class="scrolling-wrapper2">
        <span *ngFor="let movie of personalisedMoviesDisplay">
          <div  *ngIf="!watchedMovies.includes(movie.key)" class="item" [ngStyle]="{'height': (loggedIn) ? '310px' : '310px'}">
            <a (click)="GoToMovie(movie.key)">
              <img src="{{movie.smallImageUrl}}" class="img-thumbnail" style="height: 210px;width: 150px;">
              <a style="position:absolute;bottom: 110px;right: 10px;z-index: 10;" (click)="GoToMovieExternalSite(movie.key)">
                <img *ngIf="movie.ott.Netflix" src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Prime_Video" src="../../../assets/ott-icons/prime.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Aha" src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.JioCinema" src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Zee5" src="../../../assets/ott-icons/zee5.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Youtube" src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 5px;height: 32px;">
              </a>
            </a>
            <h6 style="text-align: center;">{{movie.title}}</h6>
             <!-- <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;">Quick view</button> -->
             <div style="display: flex;justify-content: center;">
              <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button>
              <span style="margin: 2%">
               <!-- <button type="button" class="btn btn-sm btn-block btn-outline-dark"> -->
                <a (click)="startSharedWindow(movie)">
                  <img style="width: 32px;margin-right: 5%;" src="../../../assets/images/send.png">
                </a>
              </span>
             </div>
             <div style="display: flex;justify-content: center;">
              <span class="neumorphic-ui" *ngIf="!wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="addMovieToWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                    <i class="bi bi-heart"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="removeFromWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                  <i class="bi bi-heart-fill" style="color: red;"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="!ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                <button style="border: none;" data-toggle="modal" data-target="#exampleModalCenter" (click)="startRateMovie(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-star"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                <button style="border: none;" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-star-fill" style="color: gold;"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="!watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="addToWatchedMovies(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <span style="font-size: xx-small;"> Watched?</span>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="removeFromWatched(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-check-circle-fill"></i>
                </button>
              </span>

            </div>
          </div>     
        </span>    
      </div>
    </div>
    <!--personalised movies ends here-->

    <br *ngIf="loggedIn">



    <!--not watched-->
    <div>
      <div class="d-flex" style="margin-left: 5%;margin-right: 5%;" *ngIf="loggedIn">
        <div class="p-2"><h5 class="display-8">Movie You Haven't Watched Yet</h5>
        </div>
        <div class="ml-auto p-2">
          <div class="float-right" style="margin-right:3% ;">
            <span class="badge badge-light">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
              </svg>
            </span>
          </div>
        </div>
      </div>
      <div class="scrolling-wrapper2">
        <span *ngFor="let movie of moviesNotYetWatchedDisplay">
          <div class="item" [ngStyle]="{'height': (loggedIn) ? '310px' : '310px'}">
          <!-- <div class="item" *ngIf=(!loggedIn) style="height: 250px;"> -->
            <a (click)="GoToMovie(movie.key)">
              <img src="{{movie.smallImageUrl}}" class="img-thumbnail" style="height: 210px;width: 150px;">
              <a style="position:absolute;bottom: 110px;right: 10px;z-index: 10;" (click)="GoToMovieExternalSite(movie.key)">
                <img *ngIf="movie.ott.Netflix" src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Prime_Video" src="../../../assets/ott-icons/prime.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Aha" src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.JioCinema" src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Zee5" src="../../../assets/ott-icons/zee5.png" style="border-radius: 5px;height: 32px;">
                <img *ngIf="movie.ott.Youtube" src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 5px;height: 32px;">
              </a>
            </a>
            <h6 style="text-align: center;">{{movie.title}}</h6> 
              <!-- <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;">Quick view</button> -->
              <div style="display: flex;justify-content: center;">
              <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button>
              <span style="margin: 2%">
                <!-- <button type="button" class="btn btn-sm btn-block btn-outline-dark"> -->
                  <a (click)="startSharedWindow(movie)">
                    <img style="width: 32px;margin-right: 5%;" src="../../../assets/images/send.png">
                  </a>
              </span>
              </div>
            <div style="display: flex;justify-content: center;">
              <span class="neumorphic-ui" *ngIf="!wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="addMovieToWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                    <i class="bi bi-heart"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="removeFromWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                  <i class="bi bi-heart-fill" style="color: red;"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="!ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                <button style="border: none;" data-toggle="modal" data-target="#exampleModalCenter" (click)="startRateMovie(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-star"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                <button style="border: none;" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-star-fill" style="color: gold;"></i>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="!watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="addToWatchedMovies(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <span style="font-size: xx-small;"> Watched?</span>
                </button>
              </span>
              <span class="neumorphic-ui" *ngIf="watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                <button style="border: none;" (click)="removeFromWatched(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                  <i class="bi bi-check-circle-fill"></i>
                </button>
              </span>

            </div> 
          </div>     
        </span>    
      </div>
    </div>
    <!--not watched end here-->

    <br *ngIf="loggedIn">

    <!--trending movies-->
    <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
      <div class="p-2"><h5 class="text-center display-8">Trending this week</h5></div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div class="scrolling-wrapper3">
      <span *ngFor="let m of trendingMovies">
        <div class="item-Trending" style="margin: 2%;margin-right: 0;width: 150px;">
          <div style="display: flex;justify-content: center;">
            <img (click)="goToRecommendedMovieImdb(m.id,m.title)" src="{{m.imageUrl}}" width="150" height="200" style="margin: 5px;border-radius: 10px;">
          </div>
          <div style="display: flex;justify-content: center;overflow-x: hidden;">
            {{m.title}}
          </div>
        </div>
      </span>
    </div>    
    <!--trending movies end here-->

    <br>

    <!--location based lists-->
    <div *ngIf="!loading">
      <div *ngIf="!(locationBasedMovies.length == 0)" class="d-flex" style="margin-left: 5%;margin-right: 5%;">
        <div class="p-2"><h5 class="display-8">Location based Movies <span class="badge badge-dark"> beta</span></h5>
        </div>
        <div class="ml-auto p-2">
          <div class="float-right" style="margin-right:3% ;">
            <span class="badge badge-light">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
              </svg>
            </span>
          </div>
        </div>
      </div>
      <div *ngIf="locationAccess" class="scrolling-wrapper3">
        <div class="scrolling-wrapper2">
          <span *ngFor="let movie of locationBasedMovies">
            <div class="item" [ngStyle]="{'height': (loggedIn) ? '310px' : '310px'}">
              <a (click)="GoToMovie(movie.key)">
                <img src="{{movie.smallImageUrl}}" class="img-thumbnail" style="height: 210px;width: 150px;">
                <a style="position:absolute;bottom: 110px;right: 10px;z-index: 10;" (click)="GoToMovieExternalSite(movie.key)">
                  <img *ngIf="movie.ott.Netflix" src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Prime_Video" src="../../../assets/ott-icons/prime.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Aha" src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.JioCinema" src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Zee5" src="../../../assets/ott-icons/zee5.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Youtube" src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 5px;height: 32px;">
                </a>
              </a>
              <h6 style="text-align: center;">{{movie.title}}</h6> 
              <!-- <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;">Quick view</button> -->
              <div style="display: flex;justify-content: center;">
                <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button>
                <span style="margin: 2%">
                <!-- <button type="button" class="btn btn-sm btn-block btn-outline-dark"> -->
                  <a (click)="startSharedWindow(movie)">
                    <img style="width: 32px;margin-right: 5%;" src="../../../assets/images/send.png">
                  </a>
                </span>
              </div>
              <div style="display: flex;justify-content: center;">
                <span class="neumorphic-ui" *ngIf="!wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="addMovieToWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                      <i class="bi bi-heart"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="removeFromWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                    <i class="bi bi-heart-fill" style="color: red;"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="!ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                  <button style="border: none;" data-toggle="modal" data-target="#exampleModalCenter" (click)="startRateMovie(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                      <i class="bi bi-star"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                  <button style="border: none;" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-star-fill" style="color: gold;"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="!watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="addToWatchedMovies(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <span style="font-size: xx-small;"> Watched?</span>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="removeFromWatched(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-check-circle-fill"></i>
                  </button>
                </span>

              </div> 
              
            </div>     
          </span>    
        </div>
      </div>
    </div>
    <!--location ends here-->

    <br>
    
    <div *ngFor="let list of editorsChoice">
      
      <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
        <div class="p-2"><h5 class="text-center display-8">{{list.listName}}</h5></div>
        <div class="ml-auto p-2">
          <div class="float-right" style="margin-right:3% ;">
            <span class="badge badge-light">
              <a (click)="gotolist(list.key)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
              </svg></a>
            </span>
          </div>
        </div>
      </div>
      <div class="scrolling-wrapper2">
          <span *ngFor="let movie of list.moviesInList">
            <div class="item" [ngStyle]="{'height': (loggedIn) ? '310px' : '310px'}">
              <a (click)="GoToMovie(movie.key)">
                <img src="{{movie.smallImageUrl}}" class="img-thumbnail" style="height: 210px;width: 150px;">
                <a style="position:absolute;bottom: 110px;right: 10px;z-index: 10;" (click)="GoToMovieExternalSite(movie.key)">
                  <img *ngIf="movie.ott.Netflix" src="../../../assets/ott-icons/netflix.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Prime_Video" src="../../../assets/ott-icons/prime.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Hotstar" src="../../../assets/ott-icons/hotstar.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Aha" src="../../../assets/ott-icons/aha.jpeg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Sun_Next" src="../../../assets/ott-icons/sunnext.jpg" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.JioCinema" src="../../../assets/ott-icons/jiocinema.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Sony_Liv" src="../../../assets/ott-icons/sonyliv.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Zee5" src="../../../assets/ott-icons/zee5.png" style="border-radius: 5px;height: 32px;">
                  <img *ngIf="movie.ott.Youtube" src="../../../assets/ott-icons/youtube.jpg" style="border-radius: 5px;height: 32px;">
                </a>
              </a>
              <h6 style="text-align: center;">{{movie.title}}</h6> 
               <!-- <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;">Quick view</button> -->
               <div style="display: flex;justify-content: center;">
                <button (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal" class="btn btn-outline-light btn-sm btn-block" style="margin: 2%;width: 96%;border: none;">Quick view</button>
                <span style="margin: 2%">
                 <!-- <button type="button" class="btn btn-sm btn-block btn-outline-dark"> -->
                  <a (click)="startSharedWindow(movie)">
                    <img style="width: 32px;margin-right: 5%;" src="../../../assets/images/send.png">
                  </a>
                </span>
               </div>
              <div style="display: flex;justify-content: center;">
                <span class="neumorphic-ui" *ngIf="!wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="addMovieToWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                      <i class="bi bi-heart"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="wishlistedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="removeFromWishlist(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light" >
                    <i class="bi bi-heart-fill" style="color: red;"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="!ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                  <button style="border: none;" data-toggle="modal" data-target="#exampleModalCenter" (click)="startRateMovie(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                      <i class="bi bi-star"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="ratedMoviesForThisCustomer.includes(movie.key) && loggedIn" style="margin: 2%;width: 100%;">
                  <button style="border: none;" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-star-fill" style="color: gold;"></i>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="!watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="addToWatchedMovies(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <span style="font-size: xx-small;"> Watched?</span>
                  </button>
                </span>
                <span class="neumorphic-ui" *ngIf="watchedMovies.includes(movie.key)" style="margin: 2%;width: 100%;">
                  <button style="border: none;" (click)="removeFromWatched(movie.key)" type="button" class="btn btn-sm btn-block btn-outline-light">
                    <i class="bi bi-check-circle-fill"></i>
                  </button>
                </span>
  
              </div> 
            </div>     
          </span> 
 
      </div>
      <br>
    </div>

    <app-tamil></app-tamil>
  
  </span>
<!--------------------------------------------------------MOBILE END HERE-------------------------------------------------------------->


<!--------------------------------------------------------LAPTOP BELOW -------------------------------------------------------------->
<span *ngIf="!isMobile">


<div>
  <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
    <div class="p-2"><h3 class="text-center display-8">Recently Suggested Movies From Us</h3></div>
    <div class="ml-auto p-2">
      <div class="float-right" style="margin-right:3% ;">
        <span class="badge badge-light">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
          </svg>
        </span>
      </div>
    </div>
  </div>
  <div class="scrolling-wrapper">
    <!-- <div style="display: flex;flex-wrap: nowrap;"> -->
      <div class="card2" *ngFor="let movie of sortedArray">
        <div class="movie-card">
          <!-- <div class="movie-header manOfSteel" style="background-image: url(movie.smallImageUrl);"> -->
            <a (click)="GoToMovie(movie.key)">
          <div class="movie-header manOfSteel" [ngStyle]="{'background-image': 'url(' + movie.smallImageUrl + ')'}">
            <div class="header-icon-container">          
            </div>
          </div></a><!--movie-header-->
          <div class="movie-content" style="color: black;">
            <div class="movie-content-header">
              <a>
                <p class="movie-title">{{movie.title}}</p>
              </a>
              
              <!-- <div class="imax-logo">Watch Trailer</div> ORIGINAL BEFORE MODAL, PASTE THIS LINE IF WE REMOVE BOOTSTRAP MODAL AND REMOVE ABOVE LINE -->
            </div>
            <div class="movie-info" style="font-size:small;">
              <div>
                <label>Language : </label>
                <span><b> {{movie.language}}</b></span>
              </div>
              <div>
                <label>Genre : </label>
                <span><b> {{movie.genre}}</b></span>
              </div>
              <div>
                <label>Run Time : </label>
                <span><b> {{movie.runTime}} Minutes</b></span>
              </div>
            </div>
              <div>
                <div class="imax-logo" (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal"><a>Quick View</a></div>
                <div class="imax-logo"  *ngIf="!watchedMovies.includes(movie.key)" (click)="addToWatchedMovies(movie.key)"><a>Watched?</a></div>
                <div class="imax-logo"  *ngIf="watchedMovies.includes(movie.key)" (click)="removeFromWatched(movie.key)"><a>Remove</a></div>
              </div>            
          </div>
        </div>  
      </div>  
    </div>
</div>


  <!--find now-->
  <div  style="margin-top: 3%;margin-bottom: 3%;">
    <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
      <div class="p-2"><h3 class="text-center display-8">Find Now</h3></div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div class="scrolling-wrapper3" style="margin-left: 4%;">
      <span *ngFor="let g of allPlatforms" (click)="GoToPlatform(g)">
        <div class="genre-icon" style="margin: 1%;">        
          <button type="button" class="btn btn-outline-primary">{{g}}</button>
        </div>      
      </span>   
    </div>
    <div class="scrolling-wrapper3" style="margin-left: 4%;">
      <span *ngFor="let g of allGenres">
        <div class="genre-icon" style="margin: 1%;">        
          <button type="button" class="btn btn-outline-primary" (click)="GoToGenre(g)">{{g}}</button>
        </div>      
      </span>   
    </div>
    
  </div>
  <!--find now end here-->

  <!--personalised ocntent-->
  <div *ngIf="loggedIn">
    <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
      <div class="p-2">
        <h3 class="display-8">Personalised Movies <span class="badge badge-dark"> beta</span></h3>
        <small id="emailHelp" class="form-text text-muted">These Movies are personalised based on your preferences, to edit preferences click <a routerLink="/personalisation">here</a></small>
      </div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div class="scrolling-wrapper">
      <!-- <div style="display: flex;flex-wrap: nowrap;"> -->
        <div class="card2" *ngFor="let movie of personalisedMoviesDisplay">
          <div class="movie-card">
            <!-- <div class="movie-header manOfSteel" style="background-image: url(movie.smallImageUrl);"> -->
              <a (click)="GoToMovie(movie.key)">
            <div class="movie-header manOfSteel" [ngStyle]="{'background-image': 'url(' + movie.smallImageUrl + ')'}">
              <div class="header-icon-container">          
              </div>
            </div></a><!--movie-header-->
            <div class="movie-content" style="color: black;">
              <div class="movie-content-header">
                <a>
                  <p class="movie-title">{{movie.title}}</p>
                </a>
                
                <!-- <div class="imax-logo">Watch Trailer</div> ORIGINAL BEFORE MODAL, PASTE THIS LINE IF WE REMOVE BOOTSTRAP MODAL AND REMOVE ABOVE LINE -->
              </div>
              <div class="movie-info" style="font-size:small;">
                <div>
                  <label>Language : </label>
                  <span><b> {{movie.language}}</b></span>
                </div>
                <div>
                  <label>Genre : </label>
                  <span><b> {{movie.genre}}</b></span>
                </div>
                <div>
                  <label>Run Time : </label>
                  <span><b> {{movie.runTime}} Minutes</b></span>
                </div>
              </div>
                <div>
                  <div class="imax-logo" (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal"><a>Quick View</a></div>
                  <div class="imax-logo"  *ngIf="!watchedMovies.includes(movie.key)" (click)="addToWatchedMovies(movie.key)"><a>Watched?</a></div>
                  <div class="imax-logo"  *ngIf="watchedMovies.includes(movie.key)" (click)="removeFromWatched(movie.key)"><a>Remove</a></div>
                </div>            
            </div>
          </div>  
        </div>  
      </div>
  </div>
  <!---personalised content ends here-->


  <div *ngIf="locationAccess">
    <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
      <div class="p-2">
        <h3 class="text-center display-8">Location Based Movies <span class="badge badge-dark"> beta</span></h3>
        <small id="emailHelp" class="form-text text-muted">Preferred Language : {{locationPreferreLanguage}}</small>
      </div>
      <div class="ml-auto p-2">
        <div class="float-right" style="margin-right:3% ;">
          <span class="badge badge-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
            </svg>
          </span>
        </div>
      </div>
    </div>
    <div class="scrolling-wrapper">
      <!-- <div style="display: flex;flex-wrap: nowrap;"> -->
        <div class="card2" *ngFor="let movie of locationBasedMovies">
          <div class="movie-card">
            <!-- <div class="movie-header manOfSteel" style="background-image: url(movie.smallImageUrl);"> -->
              <a (click)="GoToMovie(movie.key)">
            <div class="movie-header manOfSteel" [ngStyle]="{'background-image': 'url(' + movie.smallImageUrl + ')'}">
              <div class="header-icon-container">          
              </div>
            </div></a><!--movie-header-->
            <div class="movie-content" style="color: black;">
              <div class="movie-content-header">
                <a>
                  <p class="movie-title">{{movie.title}}</p>
                </a>
                
                <!-- <div class="imax-logo">Watch Trailer</div> ORIGINAL BEFORE MODAL, PASTE THIS LINE IF WE REMOVE BOOTSTRAP MODAL AND REMOVE ABOVE LINE -->
              </div>
              <div class="movie-info" style="font-size:small;">
                <div>
                  <label>Language : </label>
                  <span><b> {{movie.language}}</b></span>
                </div>
                <div>
                  <label>Genre : </label>
                  <span><b> {{movie.genre}}</b></span>
                </div>
                <div>
                  <label>Run Time : </label>
                  <span><b> {{movie.runTime}} Minutes</b></span>
                </div>
              </div>
                <div>
                  <div class="imax-logo" (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal"><a>Quick View</a></div>
                  <div class="imax-logo"  *ngIf="!watchedMovies.includes(movie.key)" (click)="addToWatchedMovies(movie.key)"><a>Watched?</a></div>
                  <div class="imax-logo"  *ngIf="watchedMovies.includes(movie.key)" (click)="removeFromWatched(movie.key)"><a>Remove</a></div>
                </div>            
            </div>
          </div>  
        </div>  
      </div>
  </div>
  
  <div *ngIf="!locationAccess" style="display: flex;justify-content: center;">
    <button type="button" class="btn btn-outline-light" (click)="buildMovieSuggestionBasedOnLocation()">See Location based content</button>
  </div>


<!---movies lists from ts file here-->
<div *ngFor="let list of editorsChoice">
  
  <div class="d-flex" style="margin-left: 5%;margin-right: 5%;">
    <div class="p-2"><h3 class="text-center display-8">{{list.listName}}</h3></div>
    <div class="ml-auto p-2">
      <div class="float-right" style="margin-right:3% ;">
        <span class="badge badge-light">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
          </svg>
        </span>
      </div>
    </div>
  </div>
  <div class="scrolling-wrapper">
    <!-- <div style="display: flex;flex-wrap: nowrap;"> -->
      <div class="card2" *ngFor="let movie of list.moviesInList">
        <div class="movie-card">
          <!-- <div class="movie-header manOfSteel" style="background-image: url(movie.smallImageUrl);"> -->
            <a (click)="GoToMovie(movie.key)">
          <div class="movie-header manOfSteel" [ngStyle]="{'background-image': 'url(' + movie.smallImageUrl + ')'}">
            <div class="header-icon-container">          
            </div>
          </div></a><!--movie-header-->
          <div class="movie-content" style="color: black;">
            <div class="movie-content-header">
              <a>
                <p class="movie-title">{{movie.title}}</p>
              </a>
              
              <!-- <div class="imax-logo">Watch Trailer</div> ORIGINAL BEFORE MODAL, PASTE THIS LINE IF WE REMOVE BOOTSTRAP MODAL AND REMOVE ABOVE LINE -->
            </div>
            <div class="movie-info" style="font-size:small;">
              <div>
                <label>Language : </label>
                <span><b> {{movie.language}}</b></span>
              </div>
              <div>
                <label>Genre : </label>
                <span><b> {{movie.genre}}</b></span>
              </div>
              <div>
                <label>Year of Release : </label>
                <span><b> {{movie.releaseYear}}</b></span>
              </div>
            </div>
              <div>
                <div class="imax-logo" (click)="startQuickView(movie.key)" data-toggle="modal" data-target="#quickviewmodal"><a>Quick View</a></div>                
                <div class="imax-logo"  *ngIf="!watchedMovies.includes(movie.key)" (click)="addToWatchedMovies(movie.key)"><a>Watched?</a></div>
                <div class="imax-logo"  *ngIf="watchedMovies.includes(movie.key)" (click)="removeFromWatched(movie.key)"><a>Remove</a></div>
              </div>            
          </div>
        </div>  
      </div>  
    </div>
</div>
<!---ts file movie list end here-->
</span>

</div>
<div class="backdrop" [ngStyle]="{'display':display}"></div>
<div style="height: 100vh;display: flex;justify-content: center;align-items: center;flex-wrap: wrap;position: absolute;top: 0;" [ngStyle]="{'display':display}">
  <div class="modal-content" style="margin: 2%;top: 10%;width: 95%;">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Suggesto</h5>
      <button type="button" class="close" (click)="onCloseHandled()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" *ngIf="oldCustomer">
      <h6>Have you been logged out, please log In again to see your wishlists, ratings, personalised movies, news feed, leader board and lot lot more</h6>
      <hr>
      <h6>Please log in with any of your social media accounts</h6>
      <p style="font-size: small;">we don't send you spam emails, random notification, 
        we don't store your personal data or email address all we store is name,photo url that too provided by your social media login service.
      </p>
    </div>
    <div class="modal-body" *ngIf="newCustomer">
      <h6>You are missing out these amazing features</h6>
      <ul class="list-group list-group-flush" style="font-size: small;">
        <li class="list-group-item">Personalised movies just for you</li>
        <li class="list-group-item">News -feed</li>
        <li class="list-group-item">Wishlisting movies</li>
        <li class="list-group-item">Creating custom lists</li>
        <li class="list-group-item">sharing wishlist to other friends(can turn off any time)</li>
        <li class="list-group-item">Our handpicked suggestion based on your preferences</li>
      </ul>
      <h6>Please log in with any of your social media accounts</h6>
      <p style="font-size: small;">we don't send you spam emails, random notification, 
        we don't store your personal data or email address all we store is name,photo url that too provided by your social media login service.
      </p>
    </div>
    <div class="modal-footer">
      <a role="button" class="btn btn-success" href="/login" style="color: white;">Log In</a>
      <button type="button" class="btn btn-secondary" (click)="onCloseHandled()">Close</button>
    </div>
  </div>
</div>
<div id="testmurari" [ngStyle]="{'display':display}">
  <h1>here</h1>
</div>

</div>

<div *ngIf="loginModalBool" style="position: absolute;top: 0;height: 100vh;width: 100%;z-index: 2;background-color: rgba(54, 54, 54, 0.6);
    display: flex;justify-content: center;align-items: center;flex-wrap: wrap;">
  <div class="modal-content" style="margin: 2%;top: 10%;width: 95%;">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Log In into Suggesto</h5>
      <button type="button" class="close" (click)="loginModalBool = false" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <app-login></app-login>
    </div>
    <div class="modal-footer">
      <!-- <a role="button" class="btn btn-success" href="/login" style="color: white;">Log In</a> -->
      <button type="button" class="btn btn-secondary" (click)="loginModalBool = false">Close</button>
    </div>
  </div>
</div>



<!--share to friends menu-->
<div *ngIf="shareWindowBool" style="z-index: 20;;position: fixed;color: white;bottom: 0;left:0;width: 96%;margin-bottom: 50px;margin-left: 2%;padding-top: 5%;background-color: rgb(51, 51, 51);border-top-right-radius: 40px;border-top-left-radius: 40px;" [ngStyle]="{'height': (allFriends.length == 0) ? '40vh' : 'auto'}">
  <div class="d-flex bd-highlight">
    <div class="p-2 w-100 bd-highlight "><h6 style="margin-left: 5%;">Share {{movieToBeShared.title}} with your friends.</h6></div>
    <div class="p-2 flex-shrink-1 bd-highlight"  style="z-index: 5;" (click)="closedShareWindow()">
      <h3><i style="color: white;" class="bi bi-x-circle-fill"></i></h3>
    </div>
    <div class="p-2 flex-shrink-1 bd-highlight"  style="z-index: 5;" (click)="closedShareWindow()">
      <!-- <h3><i style="color: white;" class="bi bi-x-circle-fill"></i></h3> -->
    </div>
  </div>
  <div class="d-flex bd-highlight">
    <div class="p-2 bd-highlight">
      <img src="{{movieToBeShared.smallImageUrl}}" width="50" height="70">
    </div>
    <div class="p-2 flex-grow-1 bd-highlight align-self-center">
      <input type="text" name="searchStr" [(ngModel)]="sendObj.senderMessage" #searchStr="ngModel" style="background-color: rgb(51, 51, 51);color: white;border: 2px solid white;width: 95%;margin: 2%;padding: 4%;border-top: none;border-left: none;border-right: none;" placeholder="Your Message Here">
    </div>
  </div>
  <div id="abc" *ngIf="allFriends.length != 0" style="margin-bottom: 20px;overflow: auto;height: 40vh;">
    <div  class="d-flex bd-highlight" *ngFor="let f of allFriends" style="margin: 2%;color: white;">
      <div class="p-2  bd-highlight">
        <img src={{f.followerphotoUrl}} width="25" height="25" style="border-radius: 100px;">
      </div>
      <div class="p-2 flex-grow-1 bd-highlight align-self-center">
        <h6>{{f.followerName | titlecase}}</h6>
      </div>
      <div class="p-2 bd-highlight align-self-center">
        <button type="button" (click)="sendMovie(f,actualMovie)" class="btn btn-sm btn-primary">Send</button>
      </div>
    </div>
  </div>
  <span *ngIf="allFriends.length == 0">
    <div *ngIf="allFriends.length == 0 && loggedIn" style="display: flex;justify-content: center;margin: 5%;">
      <h6>You might have shared this movie to all your friends OR You haven't made any friends, click <a style="color: lawngreen;" routerLink='/people'>here</a> to send follow requests to friends and share movies with them.</h6>
    </div>
    <div *ngIf="!loggedIn" style="display: flex;justify-content: center;margin: 5%;">
      <h6>You need to Login to share movies with friends. click <a style="color: lawngreen;" routerLink='/login'>here</a> to login and share movies ith friends who are using suggesto..</h6>
    </div>
  </span>
</div>